---
title: "Model"
author: "Tino Schneidewind"
date: "`r Sys.Date()`"
output: html_document
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
rm(list=ls())
```

#### This documents serves to determine adequat modeling paramteters for my Distributed Lagged (Non-Linear) Model DLNM.

```{r packages, message=FALSE, warning=FALSE}
library(viridisLite); library(dlnm); library(splines); library(ggplot2); library(viridis)
```
```{r data, message=FALSE, warning=FALSE}
# data
data = read.csv("C:/Users/tinos/Documents/Master - Climate Science/3 - Master Thesis/master_thesis/data/MedStat_aggregated/hosp_buffer_5000.csv")

# we add an Month and Year Index to the data
data$date = as.Date(data$date)
data$Year = as.numeric(format(data$date, "%Y")); data$month = as.numeric(format(data$date, "%m"))
```

To reduce processing speed, the data will be shortened. I want to keep all 8 stations and 4 years of the time series of each station in the analysis. 

```{r data shortening}
# save the first station in the shortened data set for later
data_short <- data[1:1461,]
# extract all station names but the first
station_names <- unique(data$station)[-1]

# extract 4 years of every station and save it in data_shot
for(i in station_names){
  x <- data[data$station == i,]
  data_short <- rbind(data_short, x[1:1461,])
}
```



